# ROS的循环频率

最经典的用法就是循环发布一定频率的消息，即：

```c++
ros::Rate sleep_time(100); //设定循环上限频率
while(ros::ok())
{
	pub.publish(msg);
    sleep_time.sleep();
    if(sleep_time.cycleTime() > ros::Duration(1.0/100))
    {
        ROS_INFO("miss desired rate 100,the true rate is:%f",static_cast<double>(1)/sleep_time.cycleTime().toSec());
    }
    ros::spinOnce();
}
```

需要说明的是，ros频率设定值为上限频率，如果循环中的代码处理速度很快，超过规定的100HZ，那么`sleep_time.sleep()`会阻塞等待到规定时间；如果代码处理比较慢，低于了循环规定频率，就会进入条件判断，输出警告信息，需要注意的是，除法要保证除数或被除数中至少一个是浮点型！！！，否则结果会向下取整，结果1/100就是0了，从而获得错误的输出信息。

